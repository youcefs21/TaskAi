import { Group, Tabs } from "@mantine/core";
import { type NextPage } from "next";
import Head from "next/head";
import { useEffect, useState } from "react";
import { ActiveCard } from "../components/activeCard";
import { CardContainer } from "../components/cardContainer";
import { Focus } from "../components/focus";
import { NewCardContainer } from "../components/newCardContainer";
import { card, cardHolder } from "../components/states";

import { api } from "../utils/api";

const Home: NextPage = () => {
  // const hello = api.example.hello.useQuery({ text: "from tRPC" });

  const [activeTab, setActiveTab] = useState<string | null>('board');
  const [cardHolders, setCardHolders] = useState<cardHolder[]>([]) 
  const [cards, setCards] = useState<card[]>([])

  const addCardHolder = (x: cardHolder) => {
      setCardHolders([...cardHolders, x])
  }

  const addCard = (x: card) => {
    setCards([...cards, x])
  }

  return (
    <>
    <Head>
        <title>Tasks</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
    </Head>
    <Tabs variant="outline" defaultValue="board" onTabChange={setActiveTab} className={"w-screen h-screen flex flex-col"}>
        <Tabs.List className={"flex justify-center"}>
            <Tabs.Tab value="board">Board</Tabs.Tab>
            <Tabs.Tab value="focus">focus</Tabs.Tab>
        </Tabs.List>

        <Tabs.Panel value="board" pt="xs" className={activeTab === "board" ? "w-screen h-full p-10 scrollbar scrollbar-none" : ""}>
          <div className="w-fit flex gap-3 overflow-auto h-full p-1">
              {cardHolders.map(cardHolder => <CardContainer cardHolderState={cardHolder} bigAddCard={addCard}/>)}
              <NewCardContainer addCardHolder = {addCardHolder}/>
          </div>
        </Tabs.Panel>

        <Tabs.Panel value="focus" pt="xs" className={activeTab==="focus"?"w-screen h-full overflow-hidden flex":""}>
          <Focus cards={cards}/>
        </Tabs.Panel>

        
    </Tabs>
    </>
  );
};

export default Home;
